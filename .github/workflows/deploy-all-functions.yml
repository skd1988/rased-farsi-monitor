- name: Deploy ALL Edge Functions
  env:
    SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}
    SUPABASE_PROJECT_ID: chtsmcvncfabdogrffns
  run: |
    cd $GITHUB_WORKSPACE/supabase/functions

    for fn in */ ; do
      name=$(basename "$fn")

      # Skip helper folders
      if [[ "$name" == _* ]]; then
        echo "‚è© Skipping private/shared directory: $name"
        continue
      fi

      echo "üöÄ Deploying function: $name"
      supabase functions deploy "$name" \
        --project-ref $SUPABASE_PROJECT_ID \
        --no-verify-jwt
    done

    echo "‚úÖ All functions deployed!"
